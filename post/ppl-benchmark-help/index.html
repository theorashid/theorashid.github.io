<!DOCTYPE html><html lang="en-us" >

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  
  
  <meta name="generator" content="Wowchemy 4.8.0 for Hugo">
  

  

  
  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Theo Rashid">

  
  
  
    
  
  <meta name="description" content="Help needed for benchmarking probabilistic programming languages.">

  
  <link rel="alternate" hreflang="en-us" href="https://theorashid.github.io/post/ppl-benchmark-help/">

  







  




  
  
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  

  
  
  
  <meta name="theme-color" content="#222222">
  

  
  
  
  <script src="/js/mathjax-config.js"></script>
  

  
  
  
  
    
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha256-FMvZuGapsJLjouA6k7Eo2lusoAX9i0ShlWFG6qt7SLc=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.css" integrity="sha512-1xoFisiGdy9nvho8EgXuXvnpR5GAMSjFwp40gSRE3NwdUdIMIKuPa7bqoUhLD0O/5tPNhteAsE5XyyMi5reQVA==" crossorigin="anonymous">
    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.2.2/lazysizes.min.js" integrity="sha512-TmDwFLhg3UA4ZG0Eb4MIyT1O1Mb+Oww5kFG0uHqXsdbyZz9DcvYQhKpGgNkamAI6h2lGGZq2X8ftOJvF/XjTUg==" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    

  

  
  
  
    
      
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nunito+Sans:600,800%7CRoboto&display=swap">
    
  

  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.css">

  




  


  
  

  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/images/icon_hu8a0fe45bcc616845b7260ca765bc9317_6300_32x32_fill_lanczos_center_3.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hu8a0fe45bcc616845b7260ca765bc9317_6300_192x192_fill_lanczos_center_3.png">

  <link rel="canonical" href="https://theorashid.github.io/post/ppl-benchmark-help/">

  
  
  
  
  
  
  
    
  
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="twitter:site" content="@theorashid">
  <meta property="twitter:creator" content="@theorashid">
  
  <meta property="og:site_name" content="Theo Rashid">
  <meta property="og:url" content="https://theorashid.github.io/post/ppl-benchmark-help/">
  <meta property="og:title" content="Trying to benchmark probabilistic programming languages | Theo Rashid">
  <meta property="og:description" content="Help needed for benchmarking probabilistic programming languages."><meta property="og:image" content="https://theorashid.github.io/media/goal.png">
  <meta property="twitter:image" content="https://theorashid.github.io/media/goal.png"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2022-01-14T12:42:43&#43;00:00">
    
    <meta property="article:modified_time" content="2022-01-14T12:42:43&#43;00:00">
  

  


    






  




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://theorashid.github.io/post/ppl-benchmark-help/"
  },
  "headline": "Trying to benchmark probabilistic programming languages",
  
  "datePublished": "2022-01-14T12:42:43Z",
  "dateModified": "2022-01-14T12:42:43Z",
  
  "author": {
    "@type": "Person",
    "name": "Theo Rashid"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "Theo Rashid",
    "logo": {
      "@type": "ImageObject",
      "url": "https://theorashid.github.io/images/icon_hu8a0fe45bcc616845b7260ca765bc9317_6300_192x192_fill_lanczos_center_3.png"
    }
  },
  "description": "Help needed for benchmarking probabilistic programming languages."
}
</script>

  

  


  


  





  <title>Trying to benchmark probabilistic programming languages | Theo Rashid</title>

</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class=" ">

  
  
  
  
    <script>const isSiteThemeDark = false;</script>
  
  
  <script src="/js/load-theme.js"></script>

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  












<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/">Theo Rashid</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/">Theo Rashid</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
            
            
            
              
            
            
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#about"><span>Home</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
            
            
            
              
            
            
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#posts"><span>Posts</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
            
            
            
              
            
            
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#publications"><span>Publications</span></a>
        </li>

        
        

        

        
        
        
          
            
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/cv/" target="_blank" rel="noopener"><span>CV</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      
      

      

    </ul>

  </div>
</nav>



  <article class="article">

  












  

  
  
  
<div class="article-container pt-3">
  <h1>Trying to benchmark probabilistic programming languages</h1>

  
  <p class="page-subtitle">And a cry for help.</p>
  

  
    


<div class="article-metadata">

  
  
  
  
  <div>
    

  
  <span ><a href="/author/theo-rashid/">Theo Rashid</a></span>
  </div>
  
  

  
  <span class="article-date">
    
    
      
    
    Jan 14, 2022
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    3 min read
  </span>
  

  
  
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder mr-1"></i><a href="/category/probabilistic-programming/">probabilistic programming</a>, <a href="/category/modelling/">modelling</a>, <a href="/category/statistics/">statistics</a>, <a href="/category/football/">football</a></span>
  

</div>

    














  
</div>



  <div class="article-container">

    <div class="article-style">
      <p><strong>Help me</strong> compare probabilistic programming languages.</p>
<p>I have a <a href="https://github.com/theorashid/probabilistic-programming-packages" target="_blank" rel="noopener">repo</a> for comparing various probabilistic programming languages (PPLs) in R, python and Julia in fitting a simple hierarchical model on a football dataset.</p>
<p>The current results are below, but they are very preliminary and there are plenty of other PPLs which I am yet to implement successfully. I am aware comparing MCMC samplers is a <a href="https://statmodeling.stat.columbia.edu/2021/11/17/its-so-hard-to-compare-the-efficiency-of-mcmc-samplers/" target="_blank" rel="noopener">flawed exercise</a>, and that drawing grand conclusions about the best PPL based on its performance one very specific model is dishonest. But that&rsquo;s why I&rsquo;d like help, <strong>particularly from PPL developers</strong> who can tune their model and give their language the best shot at <strong>ranking first</strong>.</p>
<p>There are a list of current issues at the bottom. Please get in touch if you&rsquo;d like to help with this project, either <a href="mailto:theoaorashid@gmail.com?subject=ppl%20project">here</a>, <a href="https://twitter.com/theorashid" target="_blank" rel="noopener">here</a>, or (even better) create a pull request.</p>
<p>Finally, if you know of an appropriate outlet for this work, such as the <a href="https://www.pymc-labs.io/blog-posts/pymc-stan-benchmark/" target="_blank" rel="noopener">site of a PPL</a> or a statistical blog, contact me and we can write it up. Otherwise, it will remain open only to the minimal traffic of this site.</p>
<h2 id="current-results">Current results</h2>
<p>These are <strong>very</strong> preliminary results based on the minimum effective sample size (ESS) across all parameters. Each model was run for a single chain of 10000 iterations (with 1000 warmup). All PPLs were run in <a href="https://colab.research.google.com" target="_blank" rel="noopener">Colab</a>.</p>
<table>
<thead>
<tr>
<th>PPL</th>
<th>compile time (s)</th>
<th>CPU ESS/second</th>
<th>GPU ESS/second</th>
</tr>
</thead>
<tbody>
<tr>
<td>stan</td>
<td>14.8</td>
<td>181.1</td>
<td>–</td>
</tr>
<tr>
<td>nimble</td>
<td>7.7</td>
<td>24.2</td>
<td>–</td>
</tr>
<tr>
<td>JAGS</td>
<td>5.0</td>
<td>286.3</td>
<td>–</td>
</tr>
<tr>
<td>PyMC</td>
<td>8.8</td>
<td>63.8</td>
<td>–</td>
</tr>
<tr>
<td>numpyro</td>
<td>7.2</td>
<td>293.8</td>
<td>10.9</td>
</tr>
<tr>
<td>Turing</td>
<td>14.9</td>
<td>16.3</td>
<td>–</td>
</tr>
</tbody>
</table>
<h2 id="help-wanted">Help wanted</h2>
<ul>
<li><strong>Models.</strong> A number of PPLs have <strong>not</strong> yet been <strong>implemented</strong> (<a href="https://www.tensorflow.org/probability/" target="_blank" rel="noopener">tensorflow probability</a>, <a href="https://beanmachine.org/" target="_blank" rel="noopener">Bean Machine</a>, <a href="https://github.com/google/edward2" target="_blank" rel="noopener">edward2</a>, <a href="https://www.gen.dev/" target="_blank" rel="noopener">Gen</a>, <a href="https://cscherrer.github.io/Soss.jl/stable/" target="_blank" rel="noopener">Soss</a>, <a href="https://github.com/rlouf/mcx" target="_blank" rel="noopener">MCX</a>, <a href="https://github.com/blackjax-devs/blackjax" target="_blank" rel="noopener">blackjax</a>). There are also plenty (I assume) of issues with my implementations. This is where PPL experts can come in and clean up.</li>
<li><strong>Errors.</strong> The JAGS standard deviation parameters seem to be off. The Turing model is running extremely slowly. PyMC are releasing their <a href="https://github.com/pymc-devs/pymc/releases/tag/v4.0.0b1" target="_blank" rel="noopener">Aesara-backed v4</a>, which will undoubtedly speed things up. And numpyro is running <em>slower</em> on a <strong>G</strong>PU?</li>
<li><strong>Comparing samplers.</strong> JAGS and NIMBLE are running their default MCMC. All the other PPLs are running NUTS. Are these comparable? Do the NUTS algorithms all need the same settings?</li>
<li><strong>Multiple chains.</strong> Here, a single chain was run. We should run multiple chains to explore which PPL works best in parallel.</li>
<li><strong>Metrics.</strong> Is the minimum effective sample size per second the best metric? Can we also compare qualitatively how easy each PPL was to set up? (In my opinion, Turing code reads the best.)</li>
<li><strong>Hardware.</strong> All the models were run on Colab, but this should be switched out for something better-performing and more consistent.</li>
</ul>
<p><em>Find the repo <a href="https://github.com/theorashid/probabilistic-programming-packages" target="_blank" rel="noopener">here</a>.</em></p>

    </div>

    








<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=https://theorashid.github.io/post/ppl-benchmark-help/&amp;text=Trying%20to%20benchmark%20probabilistic%20programming%20languages" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=https://theorashid.github.io/post/ppl-benchmark-help/&amp;t=Trying%20to%20benchmark%20probabilistic%20programming%20languages" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=Trying%20to%20benchmark%20probabilistic%20programming%20languages&amp;body=https://theorashid.github.io/post/ppl-benchmark-help/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=https://theorashid.github.io/post/ppl-benchmark-help/&amp;title=Trying%20to%20benchmark%20probabilistic%20programming%20languages" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="whatsapp://send?text=Trying%20to%20benchmark%20probabilistic%20programming%20languages%20https://theorashid.github.io/post/ppl-benchmark-help/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=https://theorashid.github.io/post/ppl-benchmark-help/&amp;title=Trying%20to%20benchmark%20probabilistic%20programming%20languages" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>











  
  
    




  












  
  
  <div class="article-widget content-widget-hr">
    <h3>Related</h3>
    <ul>
      
      <li><a href="/post/pyro-pl-model/">Pyro: a guide to winning the Premier League</a></li>
      
    </ul>
  </div>
  





  </div>
</article>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/instant.page/5.1.0/instantpage.min.js" integrity="sha512-1+qUtKoh9XZW7j+6LhRMAyOrgSQKenQ4mluTR+cvxXjP1Z54RxZuzstR/H9kgPXQsVB8IW7DMDFUJpzLjvhGSQ==" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js" integrity="sha512-TDKKr+IvoqZnPzc3l35hdjpHD0m+b2EC2SrLEgKDRWpxf2rFCxemkgvJ5kfU48ip+Y+m2XVKyOCD85ybtlZDmw==" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/r.min.js"></script>
        
      

    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.js" integrity="sha512-SeiQaaDh73yrb56sTW/RgVdi/mMqNeM2oBwubFHagc5BkixSpP1fvqF47mKzPGWYSSy4RwbBunrJBQ4Co8fRWA==" crossorigin="anonymous"></script>
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"No results found","placeholder":"Search...","results":"results found"};
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks",
        'slides' : "Slides"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/wowchemy.min.434af0ebce9e15b273b954d65feb39c7.js"></script>

    






  
  
  <div class="container">
    <footer class="site-footer">
  

  <p class="powered-by">
    
  </p>

  
  






  <p class="powered-by">
    
    Published with
    <a href="https://wowchemy.com" target="_blank" rel="noopener">Wowchemy</a>  —
    the free, <a href="https://github.com/wowchemy/wowchemy-hugo-modules" target="_blank" rel="noopener">
    open source</a> website builder that empowers creators.
    

    
    <span class="float-right" aria-hidden="true">
      <a href="#" class="back-to-top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
